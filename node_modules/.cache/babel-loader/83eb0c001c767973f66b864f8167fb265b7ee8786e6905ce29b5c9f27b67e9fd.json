{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import api from\"../Api\";import{useAuth}from\"./AuthContext\";import{useNavigate}from\"react-router-dom\";import{useSelector}from\"react-redux\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Dashboard=()=>{const navigate=useNavigate();const[jokes,setJokes]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const{isAuthenticated,logout}=useAuth();const user=useSelector(state=>state.auth.user);const color=[\"skyblue\",\"lightgrey\",\"rgb(199, 157, 17)\"];const fetchJokes=async()=>{try{var _response$data,_response$data$data;const response=await api.get(\"/public/randomjokes\");setJokes((_response$data=response.data)===null||_response$data===void 0?void 0:(_response$data$data=_response$data.data)===null||_response$data$data===void 0?void 0:_response$data$data.data);setLoading(false);}catch(error){setError(error.response?error.response.data:error.message);setLoading(false);}};const handleLogout=async()=>{try{await api.post(\"/users/logout\");localStorage.removeItem(\"accessToken\");localStorage.removeItem(\"refreshToken\");logout();navigate(\"/\");}catch(error){console.error(\"Logout failed:\",error);alert(\"Error: \"+(error.response?error.response.data:error.message));}};console.log({error});useEffect(()=>{if(!isAuthenticated){navigate(\"/login\");}else{fetchJokes();}},[isAuthenticated,navigate]);if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});console.log({jokes});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"px-5 mt-3\",children:[\"Welcome, \",user,\" ! \"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex m-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"ms-5\",children:\"Random Jokes\"}),\"\\xA0\",/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/quote'),className:\"ms-auto me-3\",style:{backgroundColor:\"white\",borderRadius:\"5px\",width:\"140px\",fontWeight:700},children:\"Quotes\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"col-2\",style:{backgroundColor:\"white\",borderRadius:\"5px\",width:\"140px\",fontWeight:700},children:\"Log Out\"})]}),\"\\xA0\",/*#__PURE__*/_jsx(\"ul\",{className:\"mx-5\",style:{listStyleType:\"none\"},children:jokes===null||jokes===void 0?void 0:jokes.map((joke,index)=>/*#__PURE__*/_jsx(\"li\",{className:\"p-3 mb-4 text-center\",style:{backgroundColor:`${color[index%3]}`,fontWeight:\"500\"},children:joke===null||joke===void 0?void 0:joke.content},index))})]})]});};export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","api","useAuth","useNavigate","useSelector","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Dashboard","navigate","jokes","setJokes","loading","setLoading","error","setError","isAuthenticated","logout","user","state","auth","color","fetchJokes","_response$data","_response$data$data","response","get","data","message","handleLogout","post","localStorage","removeItem","console","alert","log","children","className","onClick","style","backgroundColor","borderRadius","width","fontWeight","listStyleType","map","joke","index","content"],"sources":["C:/Users/AIPL/Desktop/New folder/assign/src/components/Dashboard.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport api from \"../Api\";\r\nimport { useAuth } from \"./AuthContext\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst Dashboard = () => {\r\n  const navigate = useNavigate();\r\n  const [jokes, setJokes] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const { isAuthenticated, logout } = useAuth();\r\n  const user = useSelector((state: any) => state.auth.user);\r\n\r\n  const color = [\"skyblue\", \"lightgrey\", \"rgb(199, 157, 17)\"];\r\n\r\n  const fetchJokes = async () => {\r\n    try {\r\n      const response = await api.get(\"/public/randomjokes\");\r\n      setJokes(response.data?.data?.data);\r\n\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setError(error.response ? error.response.data : error.message);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await api.post(\"/users/logout\");\r\n      localStorage.removeItem(\"accessToken\");\r\n      localStorage.removeItem(\"refreshToken\");\r\n      logout();\r\n      navigate(\"/\");\r\n    } catch (error) {\r\n      console.error(\"Logout failed:\", error);\r\n      alert(\"Error: \" + (error.response ? error.response.data : error.message));\r\n    }\r\n  };\r\n\r\n  console.log({ error });\r\n\r\n  useEffect(() => {\r\n    if (!isAuthenticated) {\r\n      navigate(\"/login\");\r\n    } else {\r\n      fetchJokes();\r\n    }\r\n  }, [isAuthenticated, navigate]);\r\n\r\n  if (loading) return <p>Loading...</p>;\r\n\r\n  console.log({ jokes });\r\n\r\n  return (\r\n    <>\r\n      <h1 className=\"px-5 mt-3\">Welcome, {user} ! </h1>\r\n      <div>\r\n        <div className=\"d-flex m-4\">\r\n          <h1 className=\"ms-5\">Random Jokes</h1> \r\n          <button\r\n            onClick={()=>navigate('/quote')}\r\n            className=\"ms-auto me-3\"\r\n            style={{\r\n              backgroundColor: \"white\",\r\n              borderRadius: \"5px\",\r\n              width: \"140px\",\r\n              fontWeight: 700,\r\n            }}\r\n          >\r\n            Quotes\r\n          </button>\r\n          <button\r\n            onClick={handleLogout}\r\n            className=\"col-2\"\r\n            style={{\r\n              backgroundColor: \"white\",\r\n              borderRadius: \"5px\",\r\n              width: \"140px\",\r\n              fontWeight: 700,\r\n            }}\r\n          >\r\n            Log Out\r\n          </button>\r\n        </div>\r\n         \r\n        <ul className=\"mx-5\" style={{ listStyleType: \"none\" }}>\r\n          {jokes?.map((joke: any, index) => (\r\n            <li\r\n              className=\"p-3 mb-4 text-center\"\r\n              key={index}\r\n              style={{\r\n                backgroundColor: `${color[index % 3]}`,\r\n                fontWeight: \"500\",\r\n              }}\r\n            >\r\n              {joke?.content}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}